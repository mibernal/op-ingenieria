# modules/clients/index.ts
export * from "./components";
export * from "./data/clients";
export type { Client, ClientData } from "@/core/domain/client";

# modules/clients/components/ClientCard.tsx
// modules/clients/components/ClientCard.tsx - CORREGIDO
import { FC } from "react";
import { 
  Card, 
  CardContent 
} from "@/components/ui/card";
import OptimizedImage from "@/shared/components/OptimizedImage";
import { cn } from "@/lib/utils";
import type { Client } from "@/core/domain/client";
import { Building2, Star } from "lucide-react";
import { Badge } from "@/components/ui/badge";

// Tipo extendido para clientes con propiedades adicionales
interface ExtendedClient extends Client {
  category?: string;
  featured?: boolean;
}

interface ClientCardProps {
  client: ExtendedClient; // USAR ExtendedClient EN LUGAR DE Client
  className?: string;
  featured?: boolean;
  onClick?: (client: ExtendedClient) => void;
}

export const ClientCard: FC<ClientCardProps> = ({ 
  client, 
  className, 
  featured = false,
  onClick 
}) => {
  return (
    <Card 
      className={cn(
        "group relative overflow-hidden transition-all duration-300",
        "hover:-translate-y-1 hover:shadow-lg",
        "cursor-pointer hover:border-accent/50",
        "h-full flex flex-col",
        onClick && "cursor-pointer",
        className
      )}
      onClick={() => onClick?.(client)}
      role={onClick ? "button" : "article"}
      aria-label={`Cliente: ${client.name}`}
    >
      {/* Featured Badge */}
      {featured && (
        <div className="absolute top-3 right-3 z-10">
          <Badge className="bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600">
            <Star className="w-3 h-3 fill-current mr-1" />
            Destacado
          </Badge>
        </div>
      )}

      {/* Category Badge */}
      {client.category && (
        <div className="absolute top-3 left-3 z-10">
          <Badge variant="secondary" className="bg-background/90 backdrop-blur-sm">
            {client.category}
          </Badge>
        </div>
      )}

      <CardContent className="p-6 flex-1 flex flex-col">
        <div className="relative w-full aspect-[4/3] flex items-center justify-center p-6 bg-gradient-to-br from-secondary/30 to-transparent rounded-lg overflow-hidden group-hover:from-secondary/40 transition-colors mb-4">
          
          {/* Background Pattern */}
          <div className="absolute inset-0 opacity-5 group-hover:opacity-10 transition-opacity">
            <div className="absolute inset-0 bg-[radial-gradient(circle_at_1px_1px,rgba(0,0,0,0.1)_1px,transparent_0)] bg-[size:20px_20px]" />
          </div>

          {client.logo ? (
            <div className="relative z-10 w-full h-full">
              <OptimizedImage
                src={client.logo}
                alt={`Logo de ${client.name}`}
                width={200}
                height={150}
                loading="lazy"
                className="w-full h-full object-contain transition-transform duration-500 group-hover:scale-105"
                fallback={
                  <div className="flex flex-col items-center justify-center h-full gap-2">
                    <Building2 className="w-12 h-12 text-muted-foreground" />
                    <span className="text-sm font-medium text-foreground text-center">
                      {client.name}
                    </span>
                  </div>
                }
              />
            </div>
          ) : (
            <div className="flex flex-col items-center justify-center h-full gap-3">
              <div className="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
                <Building2 className="w-8 h-8 text-primary" />
              </div>
              <span className="text-base font-semibold text-foreground text-center">
                {client.name}
              </span>
            </div>
          )}

          {/* Hover Overlay */}
          <div className="absolute inset-0 bg-gradient-to-t from-background/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end justify-center p-4">
            <span className="text-sm font-medium text-foreground bg-background/90 backdrop-blur-sm px-3 py-1.5 rounded-full">
              Ver detalles
            </span>
          </div>
        </div>

        {/* Client Info */}
        <div className="text-center mt-auto">
          <h3 className="font-semibold text-foreground line-clamp-1 mb-1">
            {client.name}
          </h3>
          {client.category && (
            <p className="text-sm text-muted-foreground">
              {client.category}
            </p>
          )}
        </div>
      </CardContent>
    </Card>
  );
};

export default ClientCard;

# modules/clients/components/ClientGrid.tsx
// modules/clients/components/ClientGrid.tsx - CORREGIDO
import { FC, useState, useMemo } from "react";
import { ClientCard } from "./ClientCard";
import type { Client } from "@/core/domain/client";
import { cn } from "@/lib/utils";
import { Input } from "@/components/ui/input"; // CORREGIR RUTA
import { Button } from "@/components/ui/button"; // CORREGIR RUTA
import { Search, Filter, X, Grid3x3, List, Building2 } from "lucide-react"; // AÑADIR Building2
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"; // CORREGIR RUTA

// Tipo extendido para clientes
interface ExtendedClient extends Client {
  category?: string;
  featured?: boolean;
}

interface ClientGridProps {
  clients: ExtendedClient[]; // USAR ExtendedClient
  className?: string;
  isLoading?: boolean;
  showFilters?: boolean;
  viewMode?: 'grid' | 'list';
  onViewModeChange?: (mode: 'grid' | 'list') => void;
}

export const ClientGrid: FC<ClientGridProps> = ({
  clients,
  className,
  isLoading = false,
  showFilters = true,
  viewMode = 'grid',
  onViewModeChange,
}) => {
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState<string>('all');
  const [showFeatured, setShowFeatured] = useState(false);

  // Extraer categorías únicas
  const categories = useMemo(() => {
    const cats = clients
      .map(c => c.category)
      .filter((cat): cat is string => !!cat); // Type guard para filtrar undefined
    return ['all', ...Array.from(new Set(cats))];
  }, [clients]);

  // Filtrar clientes
  const filteredClients = useMemo(() => {
    return clients.filter(client => {
      // Buscar por nombre
      const matchesSearch = !searchTerm || 
        client.name.toLowerCase().includes(searchTerm.toLowerCase());
      
      // Filtrar por categoría
      const matchesCategory = selectedCategory === 'all' || 
        client.category === selectedCategory;
      
      // Filtrar destacados
      const matchesFeatured = !showFeatured || client.featured;
      
      return matchesSearch && matchesCategory && matchesFeatured;
    });
  }, [clients, searchTerm, selectedCategory, showFeatured]);

  if (isLoading) {
    return (
      <div className={cn("animate-pulse", className)}>
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          {Array.from({ length: 8 }).map((_, index) => (
            <div key={index} className="space-y-3">
              <div className="aspect-[4/3] bg-muted rounded-lg" />
              <div className="h-4 bg-muted rounded w-3/4" />
              <div className="h-3 bg-muted rounded w-1/2" />
            </div>
          ))}
        </div>
      </div>
    );
  }

  const hasFilters = searchTerm || selectedCategory !== 'all' || showFeatured;

  return (
    <div className={cn("space-y-6", className)}>
      {/* Filtros */}
      {showFilters && (
        <div className="bg-card rounded-xl border p-4 space-y-4">
          <div className="flex flex-col md:flex-row gap-4 items-center justify-between">
            {/* Barra de búsqueda */}
            <div className="relative flex-1 max-w-md">
              <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
              <Input
                placeholder="Buscar clientes..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="pl-10"
              />
            </div>

            {/* Controles de vista */}
            <div className="flex items-center gap-2">
              {onViewModeChange && (
                <div className="flex items-center gap-1 border rounded-lg p-1">
                  <Button
                    size="sm"
                    variant={viewMode === 'grid' ? 'default' : 'ghost'}
                    onClick={() => onViewModeChange('grid')}
                    className="h-8 w-8 p-0"
                  >
                    <Grid3x3 className="h-4 w-4" />
                  </Button>
                  <Button
                    size="sm"
                    variant={viewMode === 'list' ? 'default' : 'ghost'}
                    onClick={() => onViewModeChange('list')}
                    className="h-8 w-8 p-0"
                  >
                    <List className="h-4 w-4" />
                  </Button>
                </div>
              )}

              {/* Selector de categoría */}
              <Select value={selectedCategory} onValueChange={setSelectedCategory}>
                <SelectTrigger className="w-[180px]">
                  <Filter className="h-4 w-4 mr-2" />
                  <SelectValue placeholder="Categoría" />
                </SelectTrigger>
                <SelectContent>
                  {categories.map(cat => (
                    <SelectItem key={cat} value={cat}>
                      {cat === 'all' ? 'Todas las categorías' : cat}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>

              {/* Filtro destacados */}
              <Button
                variant={showFeatured ? "default" : "outline"}
                size="sm"
                onClick={() => setShowFeatured(!showFeatured)}
              >
                Destacados
              </Button>
            </div>
          </div>

          {/* Resumen de filtros */}
          {hasFilters && (
            <div className="flex items-center justify-between pt-4 border-t">
              <div className="text-sm text-muted-foreground">
                {filteredClients.length} de {clients.length} clientes
              </div>
              <Button
                variant="ghost"
                size="sm"
                onClick={() => {
                  setSearchTerm('');
                  setSelectedCategory('all');
                  setShowFeatured(false);
                }}
                className="gap-2"
              >
                <X className="h-4 w-4" />
                Limpiar filtros
              </Button>
            </div>
          )}
        </div>
      )}

      {/* Contenido */}
      {filteredClients.length === 0 ? (
        <div className="text-center py-12 space-y-4">
          <div className="w-20 h-20 mx-auto rounded-full bg-muted flex items-center justify-center">
            <Search className="h-10 w-10 text-muted-foreground" />
          </div>
          <div>
            <h3 className="text-lg font-semibold">No se encontraron clientes</h3>
            <p className="text-muted-foreground">
              {hasFilters 
                ? "Intenta con otros filtros de búsqueda"
                : "No hay clientes para mostrar"}
            </p>
          </div>
          {hasFilters && (
            <Button
              variant="outline"
              onClick={() => {
                setSearchTerm('');
                setSelectedCategory('all');
                setShowFeatured(false);
              }}
            >
              Ver todos los clientes
            </Button>
          )}
        </div>
      ) : viewMode === 'grid' ? (
        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          {filteredClients.map((client) => (
            <ClientCard
              key={client.id}
              client={client}
              featured={client.featured}
            />
          ))}
        </div>
      ) : (
        <div className="space-y-4">
          {filteredClients.map((client) => (
            <div
              key={client.id}
              className="flex items-center gap-4 p-4 border rounded-lg hover:bg-secondary/50 transition-colors"
            >
              <div className="w-16 h-16 flex-shrink-0">
                {client.logo ? (
                  <img
                    src={client.logo}
                    alt={client.name}
                    className="w-full h-full object-contain"
                  />
                ) : (
                  <div className="w-full h-full rounded-full bg-primary/10 flex items-center justify-center">
                    <Building2 className="w-8 h-8 text-primary" />
                  </div>
                )}
              </div>
              <div className="flex-1">
                <h3 className="font-semibold">{client.name}</h3>
                {client.category && (
                  <p className="text-sm text-muted-foreground">{client.category}</p>
                )}
              </div>
              {client.featured && (
                <span className="px-2 py-1 text-xs bg-amber-100 text-amber-800 rounded-full">
                  Destacado
                </span>
              )}
            </div>
          ))}
        </div>
      )}
    </div>
  );
};

export default ClientGrid;

# modules/clients/components/ClientsSection.tsx
// modules/clients/components/ClientsSection.tsx
import LogoCarousel from "@/shared/components/LogoCarousel"; // Importar correctamente
import clientsData from "@/modules/clients/data/clients"; // Importar como default
import type { Client } from "@/core/domain/client";

export function ClientsSection() {
  const allClients: Client[] = clientsData;

  return (
    <section id="clients" className="py-16 md:py-24 bg-muted/30">
      <div className="container mx-auto px-4">
        <h2 className="section-title text-center mb-3">Nuestros Clientes</h2>
        <p className="section-subtitle text-center mx-auto mb-6">
          Empresas que confían en nosotros.
        </p>

        <LogoCarousel
          items={allClients}
          title="Clientes"
          responsive={{ base: 2, sm: 3, md: 4, lg: 5, xl: 6 }}
          gapPx={20}
        />
      </div>
    </section>
  );
}

export default ClientsSection;

# modules/clients/components/index.ts
export { ClientCard } from "./ClientCard";
export { ClientGrid } from "./ClientGrid";
export { ClientsSection } from "./ClientsSection";

# modules/clients/data/clients.ts
import type { Client } from "@/core/domain/client";
import data from "./clients.json";

export interface ClientData extends Client {
  id: string;
  name: string;
  logo?: string;
  category?: string; // AÑADIR ESTO
  featured?: boolean; // AÑADIR ESTO
  
}

// Datos mock - En producción esto vendría de una API
const clientsData: ClientData[] = [
  {
    id: "1",
    name: "Empresa Ejemplo 1",
    logo: "/images/clients/client-1.png",
    category: "Tecnología",
    featured: true,
  },
  // ... más clientes
];

export const getClients = (): ClientData[] => {
  return clientsData;
};

export const getFeaturedClients = (): ClientData[] => {
  return clientsData.filter((client) => client.featured);
};

export const getClientsByCategory = (category: string): ClientData[] => {
  return clientsData.filter((client) => client.category === category);
};

export const clients: Client[] = data as Client[];
export default clients;

# modules/projects/components/ProjectCard.tsx
// modules/projects/components/ProjectCard.tsx
import { type Project } from "@/modules/projects/data/projects";
import { useState } from "react";
import { 
  Card, 
  CardContent,
  CardFooter 
} from "@/components/ui/card";
import OptimizedImage from "@/shared/components/OptimizedImage";
import { Badge } from "@/components/ui/badge";
import { ExternalLink } from "lucide-react";
import { cn } from "@/lib/utils";

interface ProjectCardProps {
  project: Project;
  onClick: (project: Project) => void;
  variant?: 'default' | 'compact';
}

export const ProjectCard = ({ project, onClick, variant = 'default' }: ProjectCardProps) => {
  const [isHovered, setIsHovered] = useState(false);

  if (variant === 'compact') {
    return (
      <Card
        className="group cursor-pointer hover:shadow-lg transition-all duration-300"
        onClick={() => onClick(project)}
        role="button"
        tabIndex={0}
        onKeyDown={(e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            onClick(project);
          }
        }}
        aria-label={`Ver proyecto: ${project.name}`}
      >
        <CardContent className="p-4">
          <div className="flex items-center gap-4">
            <div className="relative w-20 h-20 flex-shrink-0 overflow-hidden rounded-lg">
              <OptimizedImage
                src={project.images?.[0] || "/placeholder-project.jpg"}
                alt={project.name}
                className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
              />
            </div>
            <div className="flex-1 min-w-0">
              <div className="flex items-start justify-between gap-2 mb-1">
                <h3 className="font-semibold text-foreground line-clamp-1">
                  {project.name}
                </h3>
                <ExternalLink className="w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0" />
              </div>
              <p className="text-sm text-muted-foreground line-clamp-1 mb-2">
                {project.client}
              </p>
              <div className="flex items-center gap-2">
                <Badge variant="outline" className="text-xs">
                  {project.category}
                </Badge>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>
    );
  }

  return (
    <Card
      className={cn(
        "group relative overflow-hidden transition-all duration-300",
        "hover:-translate-y-1 hover:shadow-xl",
        "h-full flex flex-col cursor-pointer",
        "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2"
      )}
      onClick={() => onClick(project)}
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
      role="button"
      tabIndex={0}
      onKeyDown={(e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          onClick(project);
        }
      }}
      aria-label={`Ver detalles del proyecto: ${project.name}`}
    >
      {/* Image Container */}
      <div className="relative aspect-video overflow-hidden">
        <OptimizedImage
          src={project.images?.[0] || "/placeholder-project.jpg"}
          alt={project.name}
          className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
          aspectRatio="video"
        />
        
        {/* Category Badge */}
        <div className="absolute top-4 left-4 z-20">
          <Badge className="bg-background/90 backdrop-blur-sm text-foreground hover:bg-background">
            {project.category}
          </Badge>
        </div>

        {/* Hover Overlay */}
        <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-20">
          <div className="bg-background/90 backdrop-blur-sm px-6 py-3 rounded-full">
            <span className="font-medium text-foreground">Ver proyecto</span>
          </div>
        </div>
      </div>

      <CardContent className="p-6 flex-1">
        <div className="space-y-3">
          <div>
            <h3 className="text-lg font-semibold text-foreground line-clamp-1 group-hover:text-accent transition-colors">
              {project.name}
            </h3>
            <p className="text-sm text-muted-foreground line-clamp-1">
              {project.client}
            </p>
          </div>

          <p className="text-sm text-muted-foreground line-clamp-2 leading-relaxed">
            {project.description || "Proyecto desarrollado por OP Ingeniería con los más altos estándares de calidad."}
          </p>
        </div>
      </CardContent>

      <CardFooter className="px-6 pb-6 pt-0 border-t pt-4">
        <div className="flex items-center justify-between w-full text-xs text-muted-foreground">
          <div className="text-accent font-medium flex items-center gap-1">
            Ver detalles
            <ExternalLink className="w-3 h-3" />
          </div>
        </div>
      </CardFooter>
    </Card>
  );
};

export default ProjectCard;

# modules/projects/components/ProjectDetailModal.tsx
// modules/projects/components/ProjectDetailModal.tsx - CORREGIDO
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
} from "@/components/ui/dialog";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { ChevronLeft, ChevronRight, X, Building2 } from "lucide-react";
import { useState, useEffect } from "react";
import type { Project } from "@/modules/projects/data/projects";
import { Card } from "@/components/ui/card";
import { cn } from "@/lib/utils";

interface ProjectDetailModalProps {
  project: Project | null;
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

const AUTO_SLIDE_INTERVAL = 5000;

export const ProjectDetailModal = ({ project, open, onOpenChange }: ProjectDetailModalProps) => {
  const [currentImageIndex, setCurrentImageIndex] = useState(0);
  const [isAutoPlaying, setIsAutoPlaying] = useState(true);

  useEffect(() => {
    if (!project || project.images.length <= 1 || !isAutoPlaying) return;

    const timer = setInterval(() => {
      setCurrentImageIndex((prev) =>
        prev === project.images.length - 1 ? 0 : prev + 1
      );
    }, AUTO_SLIDE_INTERVAL);

    return () => clearInterval(timer);
  }, [project, isAutoPlaying]);

  if (!project) return null;

  const goToPrevious = () => {
    setCurrentImageIndex((prev) =>
      prev === 0 ? project.images.length - 1 : prev - 1
    );
    setIsAutoPlaying(false);
  };

  const goToNext = () => {
    setCurrentImageIndex((prev) =>
      prev === project.images.length - 1 ? 0 : prev + 1
    );
    setIsAutoPlaying(false);
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent 
        className="max-w-6xl max-h-[90vh] overflow-y-auto p-0"
        aria-describedby="project-description"
      >
        <DialogHeader className="px-6 pt-6">
          <div className="flex items-start justify-between">
            <div>
              <DialogTitle className="text-2xl md:text-3xl font-heading font-bold">
                {project.name}
              </DialogTitle>
              <DialogDescription className="sr-only">
                Detalles del proyecto {project.name} para el cliente {project.client}
              </DialogDescription>
              <div className="flex items-center gap-2 mt-2">
                <Badge variant="secondary">
                  <Building2 className="w-3 h-3 mr-1" />
                  {project.client}
                </Badge>
                <Badge variant="outline">
                  {project.category}
                </Badge>
              </div>
            </div>
            <Button
              variant="ghost"
              size="icon"
              onClick={() => onOpenChange(false)}
              className="h-8 w-8"
              aria-label="Cerrar modal"
            >
              <X className="h-4 w-4" />
            </Button>
          </div>
        </DialogHeader>

        {/* Carrusel de imágenes */}
        <div className="relative mt-6">
          <div className="relative aspect-video bg-muted">
            <img
              src={project.images[currentImageIndex]}
              alt={`${project.name} - Imagen ${currentImageIndex + 1}`}
              className="w-full h-full object-contain"
              loading="lazy"
            />

            {project.images.length > 1 && (
              <>
                <button
                  onClick={goToPrevious}
                  className="absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-background/80 backdrop-blur-sm flex items-center justify-center hover:bg-background transition-colors"
                  aria-label="Imagen anterior"
                >
                  <ChevronLeft className="h-5 w-5" />
                </button>

                <button
                  onClick={goToNext}
                  className="absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-background/80 backdrop-blur-sm flex items-center justify-center hover:bg-background transition-colors"
                  aria-label="Siguiente imagen"
                >
                  <ChevronRight className="h-5 w-5" />
                </button>

                {/* Indicadores */}
                <div className="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
                  {project.images.map((_, index) => (
                    <button
                      key={index}
                      onClick={() => {
                        setCurrentImageIndex(index);
                        setIsAutoPlaying(false);
                      }}
                      className={cn(
                        "w-2 h-2 rounded-full transition-all",
                        index === currentImageIndex
                          ? "bg-primary w-6"
                          : "bg-primary/50 hover:bg-primary/80"
                      )}
                      aria-label={`Ir a imagen ${index + 1}`}
                    />
                  ))}
                </div>

                {/* Contador */}
                <div className="absolute top-4 right-4 bg-background/80 backdrop-blur-sm px-3 py-1.5 rounded-full text-sm">
                  {currentImageIndex + 1} / {project.images.length}
                </div>
              </>
            )}
          </div>

          {/* Miniaturas */}
          {project.images.length > 1 && (
            <div className="flex gap-2 p-4 overflow-x-auto">
              {project.images.map((img, index) => (
                <button
                  key={index}
                  onClick={() => {
                    setCurrentImageIndex(index);
                    setIsAutoPlaying(false);
                  }}
                  className={cn(
                    "flex-shrink-0 w-20 h-16 rounded-lg overflow-hidden border-2 transition-all",
                    index === currentImageIndex
                      ? "border-accent"
                      : "border-transparent hover:border-muted-foreground/30"
                  )}
                  aria-label={`Ver imagen ${index + 1}`}
                >
                  <img
                    src={img}
                    alt={`Miniatura ${index + 1}`}
                    className="w-full h-full object-cover"
                    loading="lazy"
                  />
                </button>
              ))}
            </div>
          )}
        </div>

        {/* Información del proyecto */}
        <div className="p-6 space-y-6">
          {/* Descripción */}
          <Card className="p-6" id="project-description">
            <h3 className="text-lg font-semibold mb-3">Descripción del Proyecto</h3>
            <p className="text-muted-foreground leading-relaxed">
              {project.description || "Proyecto desarrollado por OP Ingeniería. Implementación completa con altos estándares técnicos, calidad industrial y cumplimiento normativo."}
            </p>
          </Card>

          {/* Detalles */}
          <div className="grid md:grid-cols-2 gap-4">
            <Card className="p-4">
              <div className="flex items-center gap-2 text-sm text-muted-foreground mb-1">
                <Building2 className="w-4 h-4" />
                <span>Cliente</span>
              </div>
              <p className="font-medium">{project.client}</p>
            </Card>

            <Card className="p-4">
              <div className="text-sm text-muted-foreground mb-1">
                <span>Categoría</span>
              </div>
              <p className="font-medium">{project.category}</p>
            </Card>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  );
};

export default ProjectDetailModal;

# modules/projects/components/ProjectGrid.tsx
// modules/projects/components/ProjectGrid.tsx
import { memo } from "react";
import ProjectCard from "./ProjectCard";
import type { Project } from "@/modules/projects/data/projects";

interface ProjectGridProps {
  projects: Project[];
  onProjectClick: (project: Project) => void;
  loading?: boolean;
  columns?: {
    mobile?: number;
    tablet?: number;
    desktop?: number;
    wide?: number;
  };
}

const ProjectGrid = memo(
  ({
    projects,
    onProjectClick,
    loading = false,
    columns = {
      mobile: 1,
      tablet: 2,
      desktop: 3,
      wide: 4,
    },
  }: ProjectGridProps) => {
    const gridClasses = `
      grid gap-4 md:gap-6
      ${columns.mobile === 1 ? "grid-cols-1" : "grid-cols-2"}
      ${columns.tablet === 2 ? "sm:grid-cols-2" : "sm:grid-cols-3"}
      ${columns.desktop === 3 ? "lg:grid-cols-3" : "lg:grid-cols-4"}
      ${columns.wide === 4 ? "xl:grid-cols-4" : "xl:grid-cols-5"}
    `;

    if (loading) {
      return (
        <div className={gridClasses}>
          {Array.from({ length: 8 }).map((_, i) => (
            <div key={i} className="animate-pulse">
              <div className="bg-muted rounded-lg aspect-video mb-3" />
              <div className="h-4 bg-muted rounded w-3/4 mb-2" />
              <div className="h-3 bg-muted rounded w-1/2" />
            </div>
          ))}
        </div>
      );
    }

    if (projects.length === 0) {
      return (
        <div className="text-center py-12">
          <div className="w-20 h-20 mx-auto rounded-full bg-muted flex items-center justify-center mb-4">
            <svg
              className="h-10 w-10 text-muted-foreground"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={1.5}
                d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
          </div>
          <h3 className="text-lg font-semibold mb-2">No hay proyectos disponibles</h3>
          <p className="text-muted-foreground">
            No se encontraron proyectos con los filtros seleccionados.
          </p>
        </div>
      );
    }

    return (
      <div className={gridClasses} role="grid" aria-label="Lista de proyectos">
        {projects.map((project, index) => (
          <div
            key={`${project.id}-${index}`}
            className="animate-fade-in"
            style={{ animationDelay: `${index * 50}ms` }}
            role="gridcell"
          >
            <ProjectCard
              project={project}
              onClick={() => onProjectClick(project)}
            />
          </div>
        ))}
      </div>
    );
  },
  (prevProps, nextProps) => {
    // Memoización optimizada
    return (
      prevProps.projects === nextProps.projects &&
      prevProps.loading === nextProps.loading
    );
  }
);

ProjectGrid.displayName = "ProjectGrid";

export default ProjectGrid;

# modules/projects/components/ProjectsSection.tsx
// src/modules/projects/components/ProjectsSection.tsx
import { useState, useMemo } from "react";
import {
  projects as allProjects,
  projectCategories,
  type Project,
} from "@/modules/projects/data/projects";
import ProjectGrid from "./ProjectGrid";
import ProjectDetailModal from "./ProjectDetailModal";
import { Button } from "@/components/ui/button";
import { Filter } from "lucide-react";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

const ProjectsSection = () => {
  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);
  const [selectedProject, setSelectedProject] = useState<Project | null>(null);
  const [isModalOpen, setIsModalOpen] = useState(false);

  const filteredProjects = useMemo(() => {
    if (!selectedCategory) return allProjects;
    return allProjects.filter((p) => p.category === selectedCategory);
  }, [selectedCategory]);

  const handleProjectClick = (project: Project) => {
    setSelectedProject(project);
    setIsModalOpen(true);
  };

  const handleCategoryChange = (value: string) => {
    setSelectedCategory(value === "all" ? null : value);
  };

  return (
    <section id="proyectos" className="py-16 md:py-24 bg-background">
      <div className="container mx-auto px-4">
        <div className="text-center mb-10">
          <h2 className="section-title mb-3">Proyectos Ejecutados</h2>
          <p className="section-subtitle mx-auto mb-6 max-w-2xl">
            Algunos de nuestros trabajos más representativos en ingeniería eléctrica y energética.
          </p>
          
          {/* Filtro de categorías */}
          <div className="flex justify-center mb-8">
            <div className="flex items-center gap-4 w-full max-w-md">
              <Filter className="h-5 w-5 text-muted-foreground" />
              <Select value={selectedCategory || "all"} onValueChange={handleCategoryChange}>
                <SelectTrigger className="w-full">
                  <SelectValue placeholder="Filtrar por categoría" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="all">Todos los proyectos</SelectItem>
                  {projectCategories.map((category) => (
                    <SelectItem key={category.id} value={category.name}>
                      {category.name}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>
          </div>
        </div>

        {/* Contador de proyectos */}
        <div className="mb-6 text-center">
          <p className="text-sm text-muted-foreground">
            Mostrando {filteredProjects.length} de {allProjects.length} proyectos
            {selectedCategory && ` en la categoría "${selectedCategory}"`}
          </p>
        </div>

        {/* Grid de proyectos */}
        <ProjectGrid projects={filteredProjects} onProjectClick={handleProjectClick} />

        {/* Botón para ver todos si hay filtro */}
        {selectedCategory && (
          <div className="text-center mt-10">
            <Button
              variant="outline"
              onClick={() => setSelectedCategory(null)}
              className="mx-auto"
            >
              Ver todos los proyectos
            </Button>
          </div>
        )}

        {/* Modal de detalles */}
        <ProjectDetailModal
          project={selectedProject}
          open={isModalOpen}
          onOpenChange={setIsModalOpen}
        />
      </div>
    </section>
  );
};

export default ProjectsSection;

# modules/projects/components/index.ts
export { default as ProjectsSection } from "./ProjectsSection";
export { default as ProjectCard } from "./ProjectCard";
export { default as ClientsPartnersSection } from "../../clients/components/ClientsSection";

# modules/projects/data/clientsPartners.ts
export interface Client {
   id: string;
   name: string;
   logo?: string;
 }
 
 export interface Partner {
   id: string;
   name: string;
   logo?: string;
 }
 
 export const clients: Client[] = [
   { id: "1", name: "Ecopetrol" },
   { id: "2", name: "ISA" },
   { id: "3", name: "Grupo Éxito" },
   { id: "4", name: "Colpatria" },
   { id: "5", name: "Bancolombia" },
   { id: "6", name: "Universidad Nacional" },
   { id: "7", name: "Hospital San Ignacio" },
   { id: "8", name: "Avianca" },
   { id: "9", name: "Corona" },
   { id: "10", name: "Alpina" },
 ];
 
 export const partners: Partner[] = [
   { id: "1", name: "Schneider Electric" },
   { id: "2", name: "ABB" },
   { id: "3", name: "Siemens" },
   { id: "4", name: "Eaton" },
   { id: "5", name: "Legrand" },
   { id: "6", name: "General Electric" },
   { id: "7", name: "Caterpillar" },
   { id: "8", name: "Cummins" },
 ];

# modules/projects/data/projects.ts
// src/modules/projects/data/projects.ts
import projectsData from './projects_normalized.json';

export interface Project {
  id: string;
  name: string;
  client: string;
  category: string;
  description: string;
  images: string[];
  image?: string;
  slug?: string;
  source_id?: number;
  // Se han eliminado date y location
}

export interface ProjectCategory {
  id: string;
  name: string;
}

// Mantengo tu lista de categorías original
export const projectCategories: ProjectCategory[] = [
  { id: "grupos-electrogenos", name: "Grupos Electrógenos / Transferencias" },
  { id: "energia-fotovoltaica", name: "Energía Fotovoltaica" },
  { id: "ups", name: "Sistemas Ininterrumpidos de Potencia (UPS)" },
  { id: "baterias", name: "Baterías" },
  { id: "rectificadores", name: "Rectificadores - Cargadores" },
  { id: "obras-electricas", name: "Obras Eléctricas e Iluminación" },
  { id: "mantenimientos", name: "Mantenimientos" },
  { id: "aire-acondicionado", name: "Aire Acondicionado" },
  { id: "work", name: "Work / Portfolio (importado)" },
];

// Type assertion para los datos importados
export const projects: Project[] = projectsData as Project[];

export default projects;

# modules/catalog/components/CategoryFilter.tsx
import { Button } from "@/components/ui/button";
import { Battery, Gauge, Zap, Power, CircleDot, LayoutGrid } from "lucide-react";
import type { Category } from "@/modules/catalog/data/products";

interface CategoryFilterProps {
  categories: Category[];
  selectedCategoryId: string | null;
  onSelectCategory: (id: string | null) => void;
  variant?: "default" | "compact";
}

const iconMap: Record<string, React.ComponentType<{ className?: string }>> = {
  Battery,
  Gauge,
  Zap,
  Power,
  CircleDot,
};

const CategoryFilter = ({
  categories,
  selectedCategoryId,
  onSelectCategory,
  variant = 'default',
}: CategoryFilterProps) => {
  return (
    <div className={`flex ${variant === 'compact' ? 'flex-col gap-2' : 'flex-wrap justify-center gap-2 md:gap-3'}`}>
      <Button
        variant={selectedCategoryId === null ? "default" : "outline"}
        size={variant === 'compact' ? 'sm' : 'default'}
        onClick={() => onSelectCategory(null)}
        className="gap-2"
        aria-label="Mostrar todos los productos"
      >
        <LayoutGrid className="h-4 w-4" />
        Todos
      </Button>
      
{categories.map((category) => {
  const Icon = iconMap[category.icon as unknown as string] || CircleDot;

  return (
    <Button
      key={category.id}
      variant={selectedCategoryId === category.id ? "default" : "outline"}
      onClick={() => onSelectCategory(category.id)}
      className="gap-2"
    >
      <Icon className="h-4 w-4" />
      {category.name}
    </Button>
  );
})}
    </div>
  );
};

export default CategoryFilter;

# modules/catalog/components/CategoryGrid.tsx
import type { Category, Product } from "@/modules/catalog/data/products";
import OptimizedImage from "@/shared/components/OptimizedImage";

interface CategoryGridProps {
  categories: Category[];
  products: Product[];
  onSelectCategory: (categoryName: string) => void;
}

const CategoryGrid = ({ categories, products, onSelectCategory }: CategoryGridProps) => {
  // Función mejorada para obtener imagen de categoría
  const getRepresentativeImage = (categoryId: string) => {
    // Primero, intenta encontrar un producto con imágenes en esta categoría
    const productInCategory = products.find(p => {
      // Asegúrate de comparar IDs de categoría correctamente
      return p.categoryId === categoryId || 
             categories.find(c => c.name === p.categoryId)?.id === categoryId;
    });
    
    if (productInCategory?.images?.[0]) {
      return productInCategory.images[0];
    }
    
    // Si no hay producto con imágenes, busca cualquier producto en la categoría
    const anyProduct = products.find(p => 
      p.categoryId === categoryId || 
      categories.find(c => c.name === p.categoryId)?.id === categoryId
    );
    
    return anyProduct?.images?.[0] || "/placeholder-category.jpg";
  };

  const getCategoryCount = (categoryId: string) => {
    return products.filter(p => {
      return p.categoryId === categoryId || 
             categories.find(c => c.name === p.categoryId)?.id === categoryId;
    }).length;
  };

  return (
    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      {categories.map((cat) => {
        const categoryImage = getRepresentativeImage(cat.id);
        
        return (
          <button
            key={cat.id}
            onClick={() => onSelectCategory(cat.id)}
            className="group bg-card overflow-hidden rounded-xl shadow-sm hover:shadow-md text-left transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2"
            aria-label={`Ver productos de ${cat.name}`}
          >
            <div className="h-44 w-full overflow-hidden">
              <img
                src={categoryImage}
                alt={cat.name}
                className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-400"
                onError={(e) => {
                  // Si la imagen falla, usar placeholder
                  e.currentTarget.src = "/placeholder-category.jpg";
                }}
              />
            </div>

            <div className="p-4">
              <h3 className="font-heading font-semibold text-lg text-foreground mb-1">
                {cat.name}
              </h3>
              <p className="text-sm text-muted-foreground mb-2">
                {getCategoryCount(cat.id)} {getCategoryCount(cat.id) === 1 ? 'producto' : 'productos'}
              </p>
              {cat.subcategories.length > 0 && (
                <div className="flex flex-wrap gap-1">
                  {cat.subcategories.slice(0, 2).map((sub) => (
                    <span 
                      key={sub} 
                      className="text-xs px-2 py-1 bg-secondary text-secondary-foreground rounded"
                    >
                      {sub}
                    </span>
                  ))}
                  {cat.subcategories.length > 2 && (
                    <span className="text-xs text-muted-foreground">
                      +{cat.subcategories.length - 2} más
                    </span>
                  )}
                </div>
              )}
            </div>
          </button>
        );
      })}
    </div>
  );
};

export default CategoryGrid;

# modules/catalog/components/SubcategoryList.tsx
import { cn } from "@/lib/utils";

interface SubcategoryListProps {
  subcategories: string[];
  onSelect: (sub: string | null) => void;
  selected?: string | null;
  variant?: 'default' | 'compact';
}

const SubcategoryList = ({ 
  subcategories, 
  onSelect, 
  selected, 
  variant = 'default' 
}: SubcategoryListProps) => {
  return (
    <div className={cn(
      "flex flex-wrap gap-2",
      variant === 'compact' ? 'justify-start' : 'justify-center md:justify-start'
    )}>
      <button
        onClick={() => onSelect(null)}
        className={cn(
          "px-4 py-2 rounded-full border transition-colors",
          selected === null 
            ? "bg-accent text-accent-foreground border-accent" 
            : "bg-transparent text-foreground border-border hover:bg-secondary"
        )}
        aria-label="Mostrar todas las subcategorías"
      >
        Todos
      </button>

      {subcategories.map((s) => (
        <button
          key={s}
          onClick={() => onSelect(s)}
          className={cn(
            "px-4 py-2 rounded-full border transition-colors",
            selected === s 
              ? "bg-accent text-accent-foreground border-accent" 
              : "bg-transparent text-foreground border-border hover:bg-secondary"
          )}
          aria-label={`Filtrar por ${s}`}
        >
          {s}
        </button>
      ))}
    </div>
  );
};

export default SubcategoryList;

# modules/catalog/components/index.ts
export { default as CategoryFilter } from "./CategoryFilter";
export { default as CategoryGrid } from "./CategoryGrid";
export { default as SubcategoryList } from "./SubcategoryList";

# modules/catalog/components/products/ProductCard.tsx
// modules/catalog/components/products/ProductCard.tsx
import { Badge } from "@/components/ui/badge";
import { 
  Card, 
  CardContent,
  CardFooter 
} from "@/components/ui/card";
import type { Product } from "@/modules/catalog/data/products";
import { useState } from "react";
import OptimizedImage from "@/shared/components/OptimizedImage";
import { categories } from "@/modules/catalog/data/products";
import { ShoppingCart, Eye, BarChart3, ChevronRight } from "lucide-react";
import { Button } from "@/components/ui/button";

interface ProductCardProps {
  product: Product;
  onClick: (product: Product) => void;
  onQuickView?: (product: Product) => void;
  onAddToCart?: (product: Product) => void;
}

export const ProductCard = ({ 
  product, 
  onClick,
  onQuickView,
  onAddToCart 
}: ProductCardProps) => {
  const [isHovered, setIsHovered] = useState(false);

  const getCategoryName = () => {
    const category = categories.find(c => c.id === product.categoryId);
    return category?.name || product.categoryId || "Sin categoría";
  };

  const mainSpec = product.specs?.[0];

  return (
    <Card
      className="group relative overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-xl h-full flex flex-col"
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
    >
      {/* Imagen del producto */}
      <div className="relative aspect-square overflow-hidden bg-gradient-to-br from-secondary/20 to-transparent">
        <OptimizedImage
          src={product.images?.[0] || "/placeholder-product.jpg"}
          alt={product.title}
          className="w-full h-full object-contain p-6 transition-transform duration-700 group-hover:scale-105"
          aspectRatio="square"
        />
        
        {/* Badges */}
        <div className="absolute top-3 left-3 flex flex-col gap-2">
          <Badge className="bg-background/90 backdrop-blur-sm text-foreground hover:bg-background">
            {getCategoryName()}
          </Badge>
          {product.subcategory && (
            <Badge variant="outline" className="bg-background/90 backdrop-blur-sm">
              {product.subcategory}
            </Badge>
          )}
        </div>

        {/* Quick Actions */}
        <div className={`absolute top-3 right-3 flex flex-col gap-2 transition-all duration-300 ${
          isHovered ? 'opacity-100 translate-x-0' : 'opacity-0 translate-x-4'
        }`}>
          <Button
            size="icon"
            variant="outline"
            onClick={(e) => {
              e.stopPropagation();
              onQuickView?.(product);
            }}
            className="w-10 h-10 bg-background/90 backdrop-blur-sm hover:bg-background"
            aria-label="Vista rápida"
          >
            <Eye className="w-4 h-4" />
          </Button>
          {onAddToCart && (
            <Button
              size="icon"
              onClick={(e) => {
                e.stopPropagation();
                onAddToCart?.(product);
              }}
              className="w-10 h-10 bg-primary/90 text-primary-foreground hover:bg-primary"
              aria-label="Agregar al carrito"
            >
              <ShoppingCart className="w-4 h-4" />
            </Button>
          )}
        </div>
      </div>

      <CardContent className="p-6 flex-1">
        <div className="space-y-4">
          {/* Título y precio */}
          <div className="space-y-2">
            <h3 
              className="text-lg font-semibold text-foreground line-clamp-2 leading-tight cursor-pointer hover:text-accent transition-colors"
              onClick={() => onClick(product)}
            >
              {product.title}
            </h3>
            
            {product.price && (
              <div className="flex items-center justify-between">
                <span className="text-2xl font-bold text-primary">
                  {product.price}
                </span>
                <Badge variant="outline" className="text-xs">
                  Cotización
                </Badge>
              </div>
            )}
          </div>

          {/* Descripción */}
          <p className="text-sm text-muted-foreground line-clamp-2 leading-relaxed">
            {product.description}
          </p>

          {/* Especificación principal */}
          {mainSpec && (
            <div className="flex items-center gap-2 text-sm bg-secondary/50 rounded-lg p-3">
              <BarChart3 className="w-4 h-4 text-accent" />
              <div>
                <div className="font-medium">{mainSpec.label}</div>
                <div className="text-muted-foreground">{mainSpec.value}</div>
              </div>
            </div>
          )}
        </div>
      </CardContent>

      <CardFooter className="p-6 pt-0">
        <div className="flex gap-2 w-full">
          <Button
            onClick={() => onClick(product)}
            className="flex-1 gap-2"
          >
            Ver especificaciones
            <ChevronRight className="w-4 h-4" />
          </Button>
          <Button
            variant="outline"
            className="gap-2"
            onClick={(e) => {
              e.stopPropagation();
              // Lógica de cotización
            }}
          >
            Cotizar
          </Button>
        </div>
      </CardFooter>
    </Card>
  );
};

export default ProductCard;

# modules/catalog/components/products/ProductDetailModal.tsx
// modules/catalog/components/products/ProductDetailModal.tsx - SIMPLIFICADO
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogDescription,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { MessageCircle, Mail, X } from "lucide-react";
import type { Product, Spec } from "@/modules/catalog/data/products";
import { Card } from "@/components/ui/card";

interface ProductDetailModalProps {
  product: Product | null;
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

export const ProductDetailModal = ({ product, open, onOpenChange }: ProductDetailModalProps) => {
  if (!product) return null;

  const handleWhatsApp = () => {
    const message = encodeURIComponent(
      `Hola, me interesa obtener información sobre: ${product.title}`
    );
    window.open(`https://wa.me/573001234567?text=${message}`, "_blank");
  };

  const handleEmail = () => {
    const subject = encodeURIComponent(`Cotización: ${product.title}`);
    const body = encodeURIComponent(
      `Hola,\n\nMe interesa obtener información y cotización del producto:\n\n${product.title}\n\nQuedo atento a su respuesta.`
    );
    window.open(`mailto:ventas@opingenieria.com?subject=${subject}&body=${body}`, "_blank");
  };

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="max-w-4xl max-h-[90vh] overflow-y-auto p-0">
        <DialogHeader className="px-6 pt-6">
          <div className="flex items-start justify-between">
            <div>
              <DialogTitle className="text-xl md:text-2xl font-heading pr-8">
                {product.title}
              </DialogTitle>
              <DialogDescription className="sr-only">
                Detalles del producto {product.title}
              </DialogDescription>
              <div className="flex items-center gap-2 mt-2">
                <Badge variant="secondary" className="text-sm">
                  {product.categoryId}
                </Badge>
                {product.subcategory && (
                  <Badge variant="outline" className="text-sm">
                    {product.subcategory}
                  </Badge>
                )}
              </div>
            </div>
            <Button
              variant="ghost"
              size="icon"
              onClick={() => onOpenChange(false)}
              className="h-8 w-8"
            >
              <X className="h-4 w-4" />
            </Button>
          </div>
        </DialogHeader>

        <div className="grid md:grid-cols-2 gap-6 mt-4 p-6">
          {/* Product Image */}
          <div className="space-y-4">
            <div className="aspect-square rounded-lg overflow-hidden bg-secondary">
              <img
                src={product.images?.[0] || "/placeholder-product.jpg"}
                alt={product.title}
                loading="lazy"
                decoding="async"
                onError={(e) => {
                  const target = e.currentTarget;
                  if (target.src !== "/placeholder-product.jpg") {
                    target.src = "/placeholder-product.jpg";
                  }
                }}
                className="w-full h-full object-contain block"
              />
            </div>

            {/* Image Gallery */}
            {product.images.length > 1 && (
              <div className="flex gap-2 overflow-x-auto pb-2">
                {product.images.map((img, index) => (
                  <button
                    key={index}
                    className="flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border"
                  >
                    <img
                      src={img}
                      alt={`${product.title} - ${index + 1}`}
                      className="w-full h-full object-cover"
                    />
                  </button>
                ))}
              </div>
            )}
          </div>

          {/* Product Info */}
          <div className="space-y-6">
            {product.price && (
              <div className="text-3xl font-bold text-primary">
                {product.price}
              </div>
            )}

            <Card className="p-4">
              <h3 className="font-semibold mb-2">Descripción</h3>
              <p className="text-muted-foreground leading-relaxed">
                {product.description || "Producto de alta calidad para aplicaciones industriales."}
              </p>
            </Card>

            {/* Action Buttons */}
            <div className="flex flex-col sm:flex-row gap-3 pt-4">
              <Button onClick={handleWhatsApp} className="flex-1 gap-2 bg-accent hover:bg-accent/90">
                <MessageCircle className="h-4 w-4" />
                Cotizar por WhatsApp
              </Button>
              <Button onClick={handleEmail} variant="outline" className="flex-1 gap-2">
                <Mail className="h-4 w-4" />
                Cotizar por Email
              </Button>
            </div>
          </div>
        </div>

        {/* Specifications Table */}
        {product.specs && product.specs.length > 0 && (
          <div className="p-6 border-t">
            <h4 className="font-heading font-semibold text-lg mb-3">
              Especificaciones Técnicas
            </h4>
            <Card>
              <div className="overflow-hidden">
                <table className="w-full">
                  <tbody>
                    {product.specs.map((spec: Spec, index: number) => (
                      <tr
                        key={spec.label}
                        className={index % 2 === 0 ? "bg-secondary" : "bg-muted/50"}
                      >
                        <td className="px-4 py-3 font-medium text-foreground">
                          {spec.label}
                        </td>
                        <td className="px-4 py-3 text-muted-foreground text-right">
                          {spec.value}
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </Card>
          </div>
        )}
      </DialogContent>
    </Dialog>
  );
};

export default ProductDetailModal;

# modules/catalog/components/products/ProductFilters.tsx
import { useMemo } from "react";
import { X, Search } from "lucide-react";
import { cn } from "@/lib/utils";

export interface ProductFiltersState {
  search: string;
  category: string;
  subcategory: string;
}

interface Props {
  value: ProductFiltersState;
  categories: { id: string; name: string }[];
  subcategories: { id: string; name: string; categoryId: string }[];
  onChange: (value: ProductFiltersState) => void;
  onReset?: () => void;
  className?: string;
}

const DEFAULT_FILTERS: ProductFiltersState = {
  search: "",
  category: "",
  subcategory: "",
};

export default function ProductFilters({
  value,
  categories,
  subcategories,
  onChange,
  onReset,
  className,
}: Props) {
  const filteredSubcategories = useMemo(() => {
    if (!value.category) return [];
    return subcategories.filter(
      (s) => s.categoryId === value.category
    );
  }, [subcategories, value.category]);

  const update = (patch: Partial<ProductFiltersState>) => {
    onChange({
      ...value,
      ...patch,
    });
  };

  const reset = () => {
    onChange(DEFAULT_FILTERS);
    onReset?.();
  };

  return (
    <div
      className={cn(
        "w-full rounded-2xl border bg-white p-4 shadow-sm md:p-6",
        className
      )}
    >
      <div className="grid gap-4 md:grid-cols-3">
        {/* Search */}
        <div className="relative">
          <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
          <input
            value={value.search}
            onChange={(e) => update({ search: e.target.value })}
            placeholder="Buscar productos..."
            className="h-10 w-full rounded-xl border px-9 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
          />
        </div>

        {/* Category */}
        <select
          value={value.category}
          onChange={(e) =>
            update({ category: e.target.value, subcategory: "" })
          }
          className="h-10 w-full rounded-xl border px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary"
        >
          <option value="">Todas las categorías</option>
          {categories.map((c) => (
            <option key={c.id} value={c.id}>
              {c.name}
            </option>
          ))}
        </select>

        {/* Subcategory */}
        <select
          value={value.subcategory}
          onChange={(e) => update({ subcategory: e.target.value })}
          disabled={!value.category}
          className="h-10 w-full rounded-xl border px-3 text-sm disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-primary"
        >
          <option value="">Todas las subcategorías</option>
          {filteredSubcategories.map((s) => (
            <option key={s.id} value={s.id}>
              {s.name}
            </option>
          ))}
        </select>
      </div>

      {(value.search || value.category || value.subcategory) && (
        <div className="mt-4 flex justify-end">
          <button
            onClick={reset}
            className="inline-flex items-center gap-2 rounded-xl border px-4 py-2 text-sm text-muted-foreground hover:bg-muted"
          >
            <X className="h-4 w-4" />
            Limpiar filtros
          </button>
        </div>
      )}
    </div>
  );
}

# modules/catalog/components/products/ProductGrid.tsx
import { memo } from "react";
import ProductCard from "./ProductCard";
import type { Product } from "@/modules/catalog/data/products";

interface ProductGridProps {
  products: Product[];
  onProductClick: (product: Product) => void;
  loading?: boolean;
  columns?: {
    mobile?: number;
    tablet?: number;
    desktop?: number;
    wide?: number;
  };
}

const ProductGrid = memo(({ 
  products, 
  onProductClick, 
  loading = false,
  columns = {
    mobile: 1,
    tablet: 2,
    desktop: 3,
    wide: 4
  }
}: ProductGridProps) => {
  
  // Grid classes dinámicas basadas en columns
  const gridClasses = `
    grid gap-4 md:gap-6
    ${columns.mobile === 1 ? 'grid-cols-1' : 
      columns.mobile === 2 ? 'grid-cols-2' : 'grid-cols-1'}
    ${columns.tablet === 2 ? 'sm:grid-cols-2' : 
      columns.tablet === 3 ? 'sm:grid-cols-3' : 'sm:grid-cols-2'}
    ${columns.desktop === 3 ? 'lg:grid-cols-3' : 
      columns.desktop === 4 ? 'lg:grid-cols-4' : 'lg:grid-cols-3'}
    ${columns.wide === 4 ? 'xl:grid-cols-4' : 
      columns.wide === 5 ? 'xl:grid-cols-5' : 'xl:grid-cols-4'}
  `;

  if (loading) {
    return (
      <div className={gridClasses}>
        {Array.from({ length: 8 }).map((_, index) => (
          <div key={index} className="animate-pulse">
            <div className="bg-muted rounded-lg aspect-square mb-3" />
            <div className="h-4 bg-muted rounded w-3/4 mb-2" />
            <div className="h-3 bg-muted rounded w-1/2" />
          </div>
        ))}
      </div>
    );
  }

  return (
    <div className={gridClasses} role="grid" aria-label="Lista de productos">
      {products.map((product, index) => (
        <div 
          key={`${product.id}-${index}`}
          className="animate-fade-in"
          style={{ animationDelay: `${index * 50}ms` }}
          role="gridcell"
        >
          <ProductCard 
            product={product} 
            onClick={() => onProductClick(product)}
          />
        </div>
      ))}
    </div>
  );
}, (prevProps, nextProps) => {
  // Optimización: Solo re-renderizar si cambian los productos o loading
  return (
    prevProps.products === nextProps.products &&
    prevProps.loading === nextProps.loading
  );
});

ProductGrid.displayName = 'ProductGrid';

export default ProductGrid;

# modules/catalog/components/products/ProductsSection.tsx
import { useState, useMemo, lazy, Suspense } from "react";
import { products as allProducts, categories as allCategories, type Product, type Category } from "@/modules/catalog/data/products";
import ProductGridSkeleton from "@/shared/skeletons/ProductGridSkeleton";
import CategoryGrid from "@/modules/catalog/components/CategoryGrid";

// Lazy load de componentes pesados
const ProductGrid = lazy(() => import("@/modules/catalog/components/products/ProductGrid"));
const ProductDetailModal = lazy(() => import("@/modules/catalog/components/products/ProductDetailModal"));

const ProductsSection = () => {
  const [selectedCategoryId, setSelectedCategoryId] = useState<string | null>(null);
  const [selectedSubcategory, setSelectedSubcategory] = useState<string | null>(null);
  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);
  const [isModalOpen, setIsModalOpen] = useState(false);

  // Mapa de categorías optimizado
  const categoryMap = useMemo(() => {
    const map = new Map<string, Category>();
    allCategories.forEach((c) => map.set(c.id, c));
    return map;
  }, []);

  // Categoría seleccionada
  const selectedCategory = selectedCategoryId ? categoryMap.get(selectedCategoryId) : null;

  const getRepresentativeImage = (categoryId: string) => {
    // Busca productos en esta categoría
    const productsInCat = allProducts.filter(p => {
      // Asegurar que el categoryId coincida
      const productCategoryId = allCategories.find(c => c.name === p.categoryId)?.id || p.categoryId;
      return productCategoryId === categoryId;
    });
    
    // Toma la primera imagen del primer producto que tenga imágenes
    for (const product of productsInCat) {
      if (product.images && product.images.length > 0 && product.images[0]) {
        return product.images[0];
      }
    }
    
    // Si no hay imágenes, usa un placeholder
    return "/placeholder-category.jpg";
  };

  // Productos filtrados por categoría
  const productsInCategory = useMemo(() => {
    if (!selectedCategory) return [];
    return allProducts.filter((p) => 
      p.categoryId === selectedCategory.id
    );
  }, [selectedCategory]);

  // Productos visibles (con subcategoría)
  const visibleProducts = useMemo(() => {
    if (!selectedSubcategory) return productsInCategory;
    return productsInCategory.filter((p) => p.subcategory === selectedSubcategory);
  }, [productsInCategory, selectedSubcategory]);

  // Handlers
  const handleProductClick = (product: Product) => {
    setSelectedProduct(product);
    setIsModalOpen(true);
  };

  const handleBackToCategories = () => {
    setSelectedCategoryId(null);
    setSelectedSubcategory(null);
  };

  // Si no hay categoría seleccionada, mostrar grid de categorías
  if (!selectedCategoryId) {
    return (
      <section id="productos" className="py-16 md:py-24 bg-secondary">
        <div className="container mx-auto px-4">
          <h2 className="section-title text-center mb-4">Nuestros Productos</h2>
          <p className="section-subtitle text-center mx-auto mb-8">
            Explore nuestro catálogo de equipos eléctricos de alta calidad para aplicaciones industriales y comerciales.
          </p>

          <CategoryGrid
            categories={allCategories}
            products={allProducts}
            onSelectCategory={(nameOrId) => {
              const cat = allCategories.find((c) => c.id === nameOrId || c.name === nameOrId);
              if (cat) setSelectedCategoryId(cat.id);
            }}
          />
        </div>
      </section>
    );
  }

  // Vista de productos de categoría seleccionada
  return (
    <section id="productos" className="py-16 md:py-24 bg-secondary">
      <div className="container mx-auto px-4">
        {/* Header de categoría */}
        <div className="mb-8">
          <button 
            onClick={handleBackToCategories}
            className="inline-flex items-center text-sm text-accent hover:text-accent/80 mb-3 transition-colors"
            aria-label="Volver a categorías"
          >
            <span className="mr-2">←</span>
            Volver a categorías
          </button>
          
          <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
              <h1 className="text-2xl md:text-3xl font-heading font-bold text-foreground">
                {selectedCategory?.name}
              </h1>
              <p className="text-sm text-muted-foreground mt-1">
                {productsInCategory.length} productos disponibles
              </p>
            </div>

            {selectedCategory?.subcategories && selectedCategory.subcategories.length > 0 && (
              <div className="flex items-center gap-2">
                <span className="text-sm text-muted-foreground hidden md:inline">Filtrar por:</span>
                <select
                  value={selectedSubcategory || ""}
                  onChange={(e) => setSelectedSubcategory(e.target.value || null)}
                  className="px-4 py-2 border rounded-lg text-sm bg-white"
                  aria-label="Subcategorías"
                >
                  <option value="">Todas las subcategorías</option>
                  {selectedCategory.subcategories.map((sub) => (
                    <option key={sub} value={sub}>
                      {sub}
                    </option>
                  ))}
                </select>
              </div>
            )}
          </div>
        </div>

        {/* Grid de productos con suspense */}
        <Suspense fallback={<ProductGridSkeleton count={8} />}>
          <ProductGrid
            products={visibleProducts}
            onProductClick={handleProductClick}
            loading={false}
          />
        </Suspense>

        {/* Estado vacío */}
        {visibleProducts.length === 0 && (
          <div className="text-center py-16">
            <div className="w-24 h-24 mx-auto mb-4 flex items-center justify-center bg-muted rounded-full">
              <svg className="w-12 h-12 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 className="text-lg font-semibold text-foreground mb-2">No se encontraron productos</h3>
            <p className="text-muted-foreground max-w-md mx-auto">
              {selectedSubcategory 
                ? `No hay productos en la subcategoría "${selectedSubcategory}".`
                : "Prueba con otra categoría o subcategoría."
              }
            </p>
          </div>
        )}

        {/* Modal de detalles (lazy loaded) */}
        <Suspense fallback={null}>
          {selectedProduct && (
            <ProductDetailModal 
              product={selectedProduct} 
              open={isModalOpen} 
              onOpenChange={setIsModalOpen} 
            />
          )}
        </Suspense>
      </div>
    </section>
  );
};

export default ProductsSection;

# modules/catalog/components/products/index.ts
export { default as ProductCard } from "./ProductCard";
export { default as ProductGrid } from "./ProductGrid";
export { default as ProductDetailModal } from "./ProductDetailModal";
export { default as ProductFilters } from "./ProductFilters";
export { default as ProductsSection } from "./ProductsSection";

# modules/catalog/data/products.ts
import productsData from "../data/products_normalized.json";
import categoriesData from "../data/categories.json";
import { LucideIcon } from "lucide-react";

export type Spec = { label: string; value: string };

export type Product = {
  id: string;
  sku?: string;
  title: string;
  slug: string;
  categoryId: string;
  subcategory?: string | null;
  description?: string;
  longDescription?: string;
  images: string[];
  price?: string;
  specs: Spec[];
};

export type Category = {
  id: string;
  name: string;
  icon: LucideIcon;
  subcategories: string[];
};

// Crear un mapa para convertir nombres de categoría a IDs
const categoryNameToId: Record<string, string> = {};
categoriesData.forEach(cat => {
  categoryNameToId[cat.name] = cat.id;
});

export const products: Product[] = productsData.map((p) => ({
  ...p,
  categoryId: categoryNameToId[p.category] || p.category, // Usar el mapa
}));

export const categories: Category[] = categoriesData.map((c) => ({
  ...c,
  icon: undefined as unknown as LucideIcon, // TODO: Map icons based on category
}));

# modules/catalog/pages/CatalogPage.tsx
import { useMemo, useState } from "react";
import { products, categories } from "../data/products";
import CategoryFilter from "../components/CategoryFilter";
import SubcategoryList from "../components/SubcategoryList";
import ProductGrid from "@/modules/catalog/components/products/ProductGrid";
import ProductDetailModal from "@/modules/catalog/components/products/ProductDetailModal";

const CatalogPage = () => {
  const [categoryId, setCategoryId] = useState<string | null>(null);
  const [subcategory, setSubcategory] = useState<string | null>(null);
  const [selectedProduct, setSelectedProduct] = useState(null);

  const filteredProducts = useMemo(() => {
    return products.filter((p) => {
      if (categoryId && p.categoryId !== categoryId) return false;
      if (subcategory && p.subcategory !== subcategory) return false;
      return true;
    });
  }, [categoryId, subcategory]);

  const activeCategory = categories.find((c) => c.id === categoryId);

  return (
    <section className="py-16">
      <div className="container mx-auto px-4 space-y-8">

        <CategoryFilter
          categories={categories}
          selectedCategoryId={categoryId}
          onSelectCategory={(id) => {
            setCategoryId(id);
            setSubcategory(null);
          }}
        />

        {activeCategory && activeCategory.subcategories.length > 0 && (
          <SubcategoryList
            subcategories={activeCategory.subcategories}
            selected={subcategory}
            onSelect={setSubcategory}
          />
        )}

        <ProductGrid
          products={filteredProducts}
          onProductClick={setSelectedProduct}
        />

        <ProductDetailModal
          product={selectedProduct}
          open={!!selectedProduct}
          onOpenChange={(open) => !open && setSelectedProduct(null)}
        />
      </div>
    </section>
  );
};

export default CatalogPage;

